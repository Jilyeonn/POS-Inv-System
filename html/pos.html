<html>
    <head>
        <title> POS & Inventory System</title>
        <link rel="stylesheet" type="text/css" href="../css/pos.css">
        <link rel="stylesheet" type="text/css" href="../css/navbar.css">
        <link rel="icon" type="img/png" href="../img/logo.png" src="../img/logo.png">
        <script src=""></script>
        <script type="module" src="../js/pos.js"></script>
    </head>
    <body>
        <!--Start of Navigation Bar-->
   <header>
    <div class="logo">
      <img src="../img/logo.png">
      <h1>VHT Naturals</h1>
    </div>

    
    <nav>
      <ul id="nav-links">
       <li> <a href="#">Dashboard â–¾</a>
          <div class="dropdown">
            <a href="dashboard.html#sales">Sales</a>
            <a href="dashboard.html#inventory">Inventory</a>
            </div>
          </li>
        <li><a href="pos.html">Point of Sales</a></li>
        <li><a href="inventory.html">Inventory</a></li>
        <li><a href="receipthistory.html">Transaction History</a></li>
        <li><a href="/index.html">Logout</a></li>
      </ul>
    </nav>

    <button class="menu-toggle" id="menu-toggle">
      <i data-lucide="menu"></i>
    </button>

  </header>
        <!-- End of Navigation Bar -->
        <!-- Body of Dashboard (Charts of Sales & Inventory)-->

        <div class="container">
        <div class="container-1">
          <div class="products">
          <div class="products-section">
  <h2>Products</h2>
  <div id="product-list" class="product-grid"></div>
</div>
</div>
</div>

<div class="vl"> </div>
<!-- cart -->
    <div class="checkout">
    <div></div>
    <div id="cart"></div>
    <div class="end">
    
    <div class="total">
      
  

    <div style="margin-top: 10px;">
<div>
  <label for="discountType">Discount Type:</label>
  <select id="discountType">
    <option value="None">None</option>
    <option value="Senior">Senior Citizen (20%)</option>
    <option value="PWD">PWD (20%)</option>
  </select>
</div>

<div>
  <label for="discountId">Discount ID No.:</label>
  <input type="text" id="discountId" placeholder="Enter ID number">
</div> 
<p>Total: â‚±<span id="total">0.00</span></p>
    <div>
      <label style="font-size: 14px; margin-top: 0px;">Cash Given (â‚±):</label>
      <input id="cashInput" type="number" min="0" step="0.01" placeholder="Enter cash amount">
    </div>
    
    <div class="amount">
      Change: â‚±<span id="changeAmount">0.00</span>
    </div>
      <button id="checkoutBtn">Checkout</button>
    </div>
</div>
</div>


  <!-- E-Receipt Popup -->
<div id="receiptPopup">
  <div style="background:white;padding:20px;border-radius:10px;width:360px;text-align:center;">
    <h3>E-Receipt</h3>
    <p><strong>Order No:</strong> <span id="receiptNumber"></span></p>
    <table class="receipttable">
      <thead>
        <tr>
          <th>Item</th>
          <th>Qty</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody id="receiptItems"></tbody>
    </table>
    <p><strong>Total:</strong> â‚±<span id="receiptTotal"></span></p>
    <button onclick="closeReceipt()" class="creceiptbtn">Close</button>
  </div>
</div>

  <script src="https://unpkg.com/lucide@latest"></script>
<script>
  lucide.createIcons();

  function showWarningPopup() {
  let popup = document.getElementById("inactivityWarning");
  if (!popup) {
    popup = document.createElement("div");
    popup.id = "inactivityWarning";
    popup.textContent = "âš ï¸ You have been inactive. Auto logout in 30 seconds...";
    Object.assign(popup.style, {
      position: "fixed",
      bottom: "20px",
      right: "20px",
      background: "rgba(0,0,0,0.ðŸ˜Ž",
      color: "white",
      padding: "10px 15px",
      borderRadius: "8px",
      zIndex: "9999",
      fontFamily: "sans-serif",
    });
    document.body.appendChild(popup);
  } else {
    popup.style.display = "block";
  }
}

function hideWarningPopup() {
  const popup = document.getElementById("inactivityWarning");
  if (popup) popup.style.display = "none";
}

function startInactivityTimers() {
  if (inactivityTimer) clearTimeout(inactivityTimer);
  if (warningTimer) clearTimeout(warningTimer);
  hideWarningPopup();

  warningTimer = setTimeout(showWarningPopup, AUTO_LOGOUT_MS - 30000);

  inactivityTimer = setTimeout(async () => {
    const user = auth.currentUser;
    if (!user) return;

    if (!sessionStorage.getItem(AUTO_LOGOUT_DONE_KEY)) {
      sessionStorage.setItem(AUTO_LOGOUT_DONE_KEY, "1");
      await writeUserLog("auto logged out");
    }

    try {
      await signOut(auth);
    } catch (err) {
      console.error("signOut error:", err);
    }
    sessionStorage.clear();
    window.location.href = "/index.html";
  }, AUTO_LOGOUT_MS);
}

function resetInactivityTimer() {
  if (auth.currentUser) startInactivityTimers();
}

["mousemove", "keydown", "click", "scroll", "touchstart"].forEach((evt) =>
  document.addEventListener(evt, resetInactivityTimer, { passive: true })
);

  const menuToggle = document.getElementById("menu-toggle");
  const navLinks = document.getElementById("nav-links");

  
  menuToggle.addEventListener("click", () => {
    navLinks.classList.toggle("active");
  });

  
  function showPage(pageId) {
    const pages = document.querySelectorAll('.page');
    pages.forEach(page => page.classList.remove('active'));
    document.getElementById(pageId).classList.add('active');
    
    navLinks.classList.remove("active");
  }

  
  window.addEventListener("load", () => {
    const hash = window.location.hash.substring(1); // remove #
    if (hash === "sales" || hash === "inventory") {
      showPage(hash);
    } else {
      
      showPage("sales");
    }
  });
  </script>
    </body>
</html>